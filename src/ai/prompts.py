# src/ai/prompts.py

from typing import ClassVar


class PromptManager:
    EXAMPLES: ClassVar[dict[str, list[str]]] = {
        "ENTRY": [
            "W LONG Ð—Ð°ÑˆÐµÐ» Ð½Ð° 200$ Ñ 5 Ð¿Ð»ÐµÑ‡Ð¾Ð¼, ÑÑ‚Ð¾Ð¿ Ð½Ð° 0.044, Ñ‚ÐµÐ¹Ðº Ð½Ð° 0.1 ðŸ˜ ÐšÑ‚Ð¾ Ð·Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ ÑÐ¾ Ð¼Ð½Ð¾Ð¹ Ð¶Ð´Ñƒ Ñ€ÐµÐ°ÐºÑ†Ð¸Ð¸! Ð¢Ð¾Ð¶Ðµ Ð´ÑƒÐ¼Ð°ÑŽ Ð±ÑƒÐ´ÐµÑ‚ Ñ€Ð°ÐºÐµÑ‚Ð°!",
            "PEOPLE LONG Ð—Ð°ÑˆÐµÐ» Ð½Ð° 200$ Ñ 5 Ð¿Ð»ÐµÑ‡Ð¾Ð¼, ÑÑ‚Ð¾Ð¿ Ð½Ð° 0.00736, Ñ‚ÐµÐ¹Ðº Ð½Ð° 0.01683 ðŸš€ ÐšÑ‚Ð¾ Ð·Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ ÑÐ¾ Ð¼Ð½Ð¾Ð¹ Ð¶Ð´Ñƒ Ð²Ð°ÑˆÐ¸ Ñ€ÐµÐ°ÐºÑ†Ð¸Ð¸! Ð”Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ Ñ€Ð°ÐºÐµÑ‚Ð° ",
            "MOVR LONG Ð—Ð°ÑˆÐµÐ» Ð½Ð° 200$ Ñ 5 Ð¿Ð»ÐµÑ‡Ð¾Ð¼, Ð½Ðµ Ð·Ð°Ð²Ñ‹ÑˆÐ°Ð¹Ñ‚Ðµ Ñ€Ð¸ÑÐºÐ¸! Ð¡Ñ‚Ð¾Ð¿ Ð½Ð° 2.5$, Ñ‚ÐµÐ¹Ðº Ð½Ð° 7$ ðŸ”¥ ÐŸÐ¾Ð¼Ð½ÑŽ Ð² ÑÐ²Ð¾Ð¸ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð° MOVR Ð´Ð°Ð²Ð°Ð» Ð²ÑÐµÐ¼ Ð¶Ð°Ñ€Ñƒ! ÐšÑ‚Ð¾ Ð·Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ ÑÐ¾ Ð¼Ð½Ð¾Ð¹ Ð¶Ð´Ñƒ Ñ€ÐµÐ°ÐºÑ†Ð¸Ð¸!",
            "NEAR LONG Ð—Ð°ÑˆÐµÐ» Ð½Ð° 200$ Ñ 20 Ð¿Ð»ÐµÑ‡Ð¾Ð¼, ÑÑ‚Ð¾Ð¿ Ð½Ð° 1.75$, Ñ‚ÐµÐ¹Ðº Ð½Ð° 2.18$ ðŸ˜ ÐšÑ‚Ð¾ Ð·Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ ÑÐ¾ Ð¼Ð½Ð¾Ð¹ Ð¶Ð´Ñƒ Ð²Ð°ÑˆÐ¸ Ñ€ÐµÐ°ÐºÑ†Ð¸Ð¸! ",
            "TAO LONG Ð—Ð°ÑˆÐµÐ» Ð½Ð° 200$ Ñ 15 Ð¿Ð»ÐµÑ‡Ð¾Ð¼, ÑÑ‚Ð¾Ð¿ Ð½Ð° 357$, Ñ‚ÐµÐ¹Ðº Ð½Ð° 476$. ðŸ˜ ÐšÑ‚Ð¾ Ð·Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ ÑÐ¾ Ð¼Ð½Ð¾Ð¹ Ð¶Ð´Ñƒ Ð²Ð°ÑˆÐ¸ Ñ€ÐµÐ°ÐºÑ†Ð¸Ð¸! ðŸš€",
        ],
        "PARTIAL_EXIT": [
            "SUI 50% Ð·Ð°Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð», Ð·Ð°Ñ…Ð¾Ð´Ð¸Ð»Ð¸ ÑÐ¾ Ð¼Ð½Ð¾Ð¹? ðŸ¤¤",
            "ÐšÐ°Ðº Ñ‡Ð°ÑÑ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ðµ Ð·Ð°Ð±Ð¸Ñ€Ð°ÐµÑ‚Ðµ? NEAR 50% Ð·Ð°Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð»! ðŸš€  Ð¯ Ð¿Ñ€ÑÐ¼ ÐºÐ°Ðº Ð¸Ð½ÑÐ°Ð¹Ð´ÐµÑ€ Ð½Ð° Ð¿Ð°Ð¼Ð¿Ñ‹",
            "50% Ð·Ð°Ñ„Ð¸ÐºÑÐ¸Ð» ZEC, Ð·Ð°Ñ…Ð¾Ð´Ð¸Ð»Ð¸ ÑÐ¾ Ð¼Ð½Ð¾Ð¹? ðŸ”¥",
            "Ð’ÑÐµÐ¼ Ð´Ð¾Ð±Ñ€Ð¾Ðµ ÑƒÑ‚Ñ€Ð¾! MINA 50% Ð·Ð°Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð»! ðŸ”¥",
            "BTC 50% Ð·Ð°Ñ„Ð¸ÐºÑÐ¸Ð», Ð·Ð°Ñ…Ð¾Ð´Ð¸Ð»Ð¸? ðŸ‘‡",
        ],
        "FULL_EXIT": [
            "SUI Ð·Ð°Ñ„Ð¸ÐºÑÐ¸Ð» Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ, Ð·Ð°Ñ…Ð¾Ð´Ð¸Ð»Ð¸ ÑÐ¾ Ð¼Ð½Ð¾Ð¹? ÐÐ¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð¾ ÑÑ‹Ð¿ÐµÑ‚! ðŸ‘€",
            "PEOPLE Ð²Ð·ÑÐ»Ð¸ Ñ‚ÐµÐ¹Ðº! Ð‘ÐµÑˆÐµÐ½Ð½Ñ‹Ðµ 300%!! Ð—Ð°Ñ…Ð¾Ð´Ð¸Ð»Ð¸? ðŸ¥°",
            "MOVR Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð·Ð°Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð», Ð·Ð°Ñ…Ð¾Ð´Ð¸Ð»Ð¸ ÑÐ¾ Ð¼Ð½Ð¾Ð¹? ðŸ˜",
            "NEAR Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð·Ð°Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½, Ð·Ð°Ñ…Ð¾Ð´Ð¸Ð»Ð¸ ÑÐ¾ Ð¼Ð½Ð¾Ð¹? ðŸ¤©",
            "ZEC Ð²Ð·ÑÐ»Ð¸ Ñ‚ÐµÐ¹Ðº, Ð·Ð°Ñ…Ð¾Ð´Ð¸Ð»Ð¸ Ð²Ð¼ÐµÑÑ‚Ðµ ÑÐ¾ Ð¼Ð½Ð¾Ð¹? 300% Ð·Ð°Ð±Ð¸Ñ€Ð°ÐµÐ¼ ÑƒÐ¶Ðµ Ð²Ñ‚Ð¾Ñ€Ð¾Ð¹ Ñ€Ð°Ð·! ðŸ« ",
        ],
        "NOISE": [
            "Ð±Ð°Ð°Ð°Ð°.....ÑÐ¿Ð°ÑÐ¸Ð±ÐµÑ‰Ðµ",
            "Ð’Ð¾Ñ‚ Ñ‚Ð°ÐºÐ¾Ð¹ Ð¿Ð»ÑŽÑ Ð·Ð°Ð±Ñ€Ð°Ð» Ð¿Ð¾Ð´Ð¿Ð¸ÑÑ‡Ð¸Ðº ðŸ˜",
            "Ð ÐµÐ±ÑÑ‚Ð°, Ð²ÑÐµÐ¼ ÑÐ¿Ð¾ÐºÐ¾Ð¹Ð½Ð¾Ð¹ Ð½Ð¾Ñ‡Ð¸, Ð¶Ð°Ñ€ÐºÐ¸Ð¹ Ð´ÐµÐ½ÑŒ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð»ÑÑ ðŸ¤¤ Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð¼Ð¾Ð¶Ð½Ð¾ ÑÐ¿Ð¾ÐºÐ¾Ð¹Ð½Ð¾ Ð¿Ð¾ÑÐ¿Ð°Ñ‚ÑŒ! ðŸ”¥",
            "Ð’ÑÐµÐ¼ Ð´Ð¾Ð±Ñ€Ð¾Ð³Ð¾ ÑƒÑ‚Ñ€Ð°! Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ Ñ€Ñ‹Ð½Ð¾Ðº Ñƒ Ð½Ð°Ñ Ð½Ðµ ÑÐ¾Ð²ÑÐµÐ¼ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¹, Ð±ÑƒÐ´Ñƒ Ð¸ÑÐºÐ°Ñ‚ÑŒ Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸, ÐºÑ‚Ð¾ Ð¶Ð´ÐµÑ‚ ÑÐ´ÐµÐ»ÐºÑƒ, Ð¶Ð´Ñƒ Ñ€ÐµÐ°ÐºÑ†Ð¸Ð¸) ðŸš€",
            "ÐŸÐµÑ€Ð²Ñ‹Ð¹ Ñ€Ð°Ð· Ð·Ð° Ð½ÐµÐ´ÐµÐ»ÑŽ Ð½Ðµ Ð·Ð°ÑˆÐµÐ» Ð² ÑÐ´ÐµÐ»ÐºÑƒ ðŸ¤¦â€â™‚ï¸ Ð¡ÐºÐ°Ð¶Ð¸ Ñ‡ÐµÑÑ‚Ð½Ð¾ Ñ‚Ñ‹ Ð¸Ð·Ð´ÐµÐ²Ð°ÐµÑˆÑŒÑÑ Ñ‚Ð°ÐºÐ¾Ðµ Ð´Ð°Ð²Ð°Ñ‚ÑŒ Ð¸Ð¼ÐµÐ½Ð½Ð¾ ÑÐµÐ¹Ñ‡Ð°Ñ ÐºÐ¾Ð³Ð´Ð° Ñ Ð·Ð° Ñ€ÑƒÐ»ÐµÐ¼??? ÐœÐ¾Ðµ Ñ„Ð¾Ð¼Ð¾ Ð¼ÐµÐ½Ñ ÑÑŠÐµÑÑ‚â€¦.",
            "Ð‘Ð¸Ñ‚ÐºÐ¾Ð¸Ð½ Ð²Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚ Ð´Ð¾Ð²Ð¾Ð»ÑŒÐ½Ð¾ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ñ‹Ð¼, Ñ…Ð¾Ñ‡Ñƒ ÐµÐ³Ð¾ ÐºÑƒÐ¿Ð¸Ñ‚ÑŒ"
        ],
    }

    SYSTEM_PROMPT = "Ð¢Ñ‹ ÑÐºÑÐ¿ÐµÑ€Ñ‚ Ð¿Ð¾ ÐºÐ»Ð°ÑÑÐ¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸ Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ñ‹Ñ… ÑÐ¸Ð³Ð½Ð°Ð»Ð¾Ð² Ð¸Ð· ÐºÑ€Ð¸Ð¿Ñ‚Ð¾ ÐºÐ°Ð½Ð°Ð»Ð¾Ð². ÐšÐ»Ð°ÑÑÐ¸Ñ„Ð¸Ñ†Ð¸Ñ€ÑƒÐ¹ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð¸ ÐºÑ€Ð°Ñ‚ÐºÐ¾."

    INSTRUCTION = """ÐÐ° Ð¾ÑÐ½Ð¾Ð²Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð¾Ð², ÐºÐ»Ð°ÑÑÐ¸Ñ„Ð¸Ñ†Ð¸Ñ€ÑƒÐ¹ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¸ Ð¾Ñ‚Ð²ÐµÑ‚ÑŒ Ð¾Ð´Ð½Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¾Ð¹:

Ð•ÑÐ»Ð¸ ÑÑ‚Ð¾ ÑÐ¸Ð³Ð½Ð°Ð» Ð²Ñ…Ð¾Ð´Ð° (ENTRY):
- TP Ð¸ SL Ð¿Ð¸ÑˆÐ¸ Ð¢ÐžÐ›Ð¬ÐšÐž ÐºÐ°Ðº Ñ‡Ð¸ÑÐ»Ð° Ð±ÐµÐ· ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð² (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ 120000, Ð½Ðµ 120000$)
- {ASSET} Long Leverage:{value}x TP:{price} SL:{price}
- {ASSET} Short Leverage:{value}x TP:{price} SL:{price}
- Ð•ÑÐ»Ð¸ TP, SL Ð¸Ð»Ð¸ Leverage Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‚, Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ N/A (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: BTC Long Leverage:N/ATP:120000 SL:N/A)
- Ð•ÑÐ»Ð¸ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ TP ÑƒÑ€Ð¾Ð²Ð½ÐµÐ¹, Ð²Ð¾Ð·ÑŒÐ¼Ð¸ Ð¿ÐµÑ€Ð²Ñ‹Ð¹

Ð•ÑÐ»Ð¸ ÑÑ‚Ð¾ Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ (PARTIAL_EXIT):
- {ASSET} close {%}

Ð•ÑÐ»Ð¸ ÑÑ‚Ð¾ Ð¿Ð¾Ð»Ð½Ð¾Ðµ Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ (FULL_EXIT):
- {ASSET} close all

Ð•ÑÐ»Ð¸ ÑÑ‚Ð¾ ÑˆÑƒÐ¼, Ñ„Ð»ÑƒÐ´ Ð¸Ð»Ð¸ Ñ€Ð°Ð·Ð¼Ñ‹ÑˆÐ»ÐµÐ½Ð¸Ñ Ð¾ Ñ€Ñ‹Ð½ÐºÐµ (NOISE):
- NOISE

ÐžÑ‚Ð²ÐµÑ‚ÑŒ Ñ€Ð¾Ð²Ð½Ð¾ Ð¾Ð´Ð½Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¾Ð¹, Ð±ÐµÐ· Ð¿Ð¾ÑÑÐ½ÐµÐ½Ð¸Ð¹."""

    @classmethod
    def build_prompt(cls, message: str) -> str:
        examples_text = cls._format_examples()
        return f"""{examples_text}

ÐÐ¾Ð²Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ:
{message}

Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ:
{cls.INSTRUCTION}"""

    @classmethod
    def _format_examples(cls) -> str:
        parts = []

        for signal_type, examples in cls.EXAMPLES.items():
            examples_str = "\n".join(f"- {ex}" for ex in examples[:5])
            parts.append(f"{len(examples[:5])} Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð¾Ð² {signal_type}:\n{examples_str}")

        return "\n\n".join(parts)